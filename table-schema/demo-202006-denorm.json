{
   "profile": "tabular-data-package",
   "name": "denormalized_table_specs_for_level_1_c2m2",
   "title": "A list of derived tables to augment C2M2 Level 1 metadata for seach and display purposes",
   "resources": [

      {
         "profile": "tabular-data-resource",
         "name": "file_subject_granularity",
         "title": "file_subject_granularity",
         "description": "Collapsed association of subject-granularities for subjects described by file",
         "schema": {
            "fields": [
               {
                  "name": "file_id_namespace",
                  "description": "Identifier namespace for this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "file_id",
                  "description": "The ID of this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_granularity",
                  "description": "A CFDE CV term categorizing described subject by multiplicity",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "file_id_namespace",
               "file_id",
               "subject_granularity"
            ],
            "foreignKeys": [
               {
                  "fields": [ "file_id_namespace", "file_id" ],
                  "constraint_name": "file_subject_granularity_file_fkey",
                  "reference": {
                     "title": "Characterized File",
                     "resource": "file",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "subject_granularity",
                  "constraint_name": "file_subject_granularity_granularity_fkey",
                  "reference": {
                     "title": "Subject Granularity",
                     "resource": "subject_granularity",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "file_subject_granularity.sql"
      },
      
      {
         "profile": "tabular-data-resource",
         "name": "file_subject_role_taxonomy",
         "title": "file_subject_role_taxonomy",
         "description": "Collapsed association of subject-role-taxonomies for subjects described by file",
         "schema": {
            "fields": [
               {
                  "name": "file_id_namespace",
                  "description": "Identifier namespace for this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "file_id",
                  "description": "The ID of this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_role_id",
                  "description": "The ID of the role assigned to this organism-level constituent component of described subject",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_taxonomy_id",
                  "description": "An NCBI Taxonomy Database ID identifying taxon of described subject",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "file_id_namespace",
               "file_id",
               "subject_role_id",
               "subject_taxonomy_id"
            ],
            "foreignKeys": [
               {
                  "fields": [ "file_id_namespace", "file_id" ],
                  "constraint_name": "file_subject_granularity_file_fkey",
                  "reference": {
                     "title": "Characterized File",
                     "resource": "file",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "subject_role_id",
                  "constraint_name": "file_subject_role_taxonomy_role_fkey",
                  "reference": {
                     "resource": "subject_role",
                     "fields": "id"
                  }
               },
               {
                  "fields": "subject_taxonomy_id",
                  "constraint_name": "file_subject_role_taxonomy_taxonomy_fkey",
                  "reference": {
                     "resource": "ncbi_taxonomy",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "file_subject_role_taxonomy.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "file_biosample_creation_time",
         "title": "file_biosample_creation_time",
         "description": "Collapsed association of biosample-creation-times for biosamples described by file",
         "schema": {
            "fields": [
               {
                  "name": "file_id_namespace",
                  "description": "Identifier namespace for this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "file_id",
                  "description": "The ID of this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "biosample_creation_time",
                  "description": "An ISO 8601 -- RFC 3339 (subset)-compliant timestamp documenting desribed biosamples' creation time: YYYY-MM-DDTHH:MM:SS±NN:NN",
                  "type": "datetime",
                  "format": "any"
               }
            ],
            "primaryKey": [
               "file_id_namespace",
               "file_id",
               "biosample_creation_time"
            ],
            "foreignKeys": [
               {
                  "fields": [ "file_id_namespace", "file_id" ],
                  "constraint_name": "file_biosample_creation_time_file_fkey",
                  "reference": {
                     "title": "Characterized File",
                     "resource": "file",
                     "fields": [ "id_namespace", "id" ]
                  }
               }
            ]
         },
         "derivation_sql_path": "file_biosample_creation_time.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "file_assay_type",
         "title": "file_assay_type",
         "description": "Collapsed association of assay-types described by file",
         "schema": {
            "fields": [
               {
                  "name": "file_id_namespace",
                  "description": "Identifier namespace for this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "file_id",
                  "description": "The ID of this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "assay_type",
                  "description": "An OBI CV term ID describing the type of material represented by this file",
                  "type": "string",
                  "constraints": {
                     "pattern": "^OBI:[0-9]+$"
                  }
               }
            ],
            "primaryKey": [
               "file_id_namespace",
               "file_id",
               "assay_type"
            ],
            "foreignKeys": [
               {
                  "fields": [ "file_id_namespace", "file_id" ],
                  "constraint_name": "file_assay_type_file_fkey",
                  "reference": {
                     "title": "Characterized File",
                     "resource": "file",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "assay_type",
                  "constraint_name": "file_assay_type_fkey",
                  "reference": {
                     "resource": "assay_type",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "file_assay_type.sql"
      },
      
      {
         "profile": "tabular-data-resource",
         "name": "file_anatomy",
         "title": "file_anatomy",
         "description": "Collapsed association of anatomies described by file",
         "schema": {
            "fields": [
               {
                  "name": "file_id_namespace",
                  "description": "Identifier namespace for this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "file_id",
                  "description": "The ID of this file",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "anatomy",
                  "description": "An UBERON CV term ID used to locate the origin of this biosample within the physiology of its source or host organism",
                  "type": "string",
                  "constraints": {
                     "pattern": "^UBERON:[0-9]+$"
                  }
               }
            ],
            "primaryKey": [
               "file_id_namespace",
               "file_id",
               "anatomy"
            ],
            "foreignKeys": [
               {
                  "fields": [ "file_id_namespace", "file_id" ],
                  "constraint_name": "file_anatomy_file_fkey",
                  "reference": {
                     "title": "Characterized File",
                     "resource": "file",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "anatomy",
                  "constraint_name": "file_anatomy_fkey",
                  "reference": {
                     "resource": "anatomy",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "file_anatomy.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "project_in_project_transitive",
         "title": "project_in_project_transitive",
         "description": "Reflexive transitive-closure of project_in_project relationship",
         "schema": {
            "fields": [
               {
                  "name": "leader_project_id_namespace",
                  "description": "ID of the identifier namespace for the leader in this leader-member project pair",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "leader_project_id",
                  "description": "The ID of the leader (containing) project",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "member_project_id_namespace",
                  "description": "ID of the identifier namespace for the member in this leader-member project pair",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "member_project_id",
                  "description": "The ID of the member (contained or reflexive) project",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "leader_project_id_namespace",
               "leader_project_id",
               "member_project_id_namespace",
               "member_project_id"
            ],
            "foreignKeys": [
               {
                  "fields": [ "leader_project_id_namespace", "leader_project_id" ],
                  "constraint_name": "project_in_project_transitive_leader_fkey",
                  "reference": {
                     "title": "Leader Project",
                     "resource": "project",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": [ "member_project_id_namespace", "member_project_id" ],
                  "constraint_name": "project_in_project_transitive_member_fkey",
                  "reference": {
                     "title": "Member Project",
                     "resource": "project",
                     "fields": [ "id_namespace", "id" ]
                  }
               }
            ]
         },
         "derivation_sql_path": "project_in_project_transitive.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_in_collection_transitive",
         "title": "collection_in_collection_transitive",
         "description": "Reflexive transitive-closure of collection_in_collection relationship",
         "schema": {
            "fields": [
               {
                  "name": "leader_collection_id_namespace",
                  "description": "ID of the identifier namespace for the leader in this leader-member collection pair",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "leader_collection_id",
                  "description": "The ID of the leader (containing) collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "member_collection_id_namespace",
                  "description": "ID of the identifier namespace for the member in this leader-member collection pair",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "member_collection_id",
                  "description": "The ID of the member (contained or reflexive) collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "leader_collection_id_namespace",
               "leader_collection_id",
               "member_collection_id_namespace",
               "member_collection_id"
            ],
            "foreignKeys": [
               {
                  "fields": [ "leader_collection_id_namespace", "leader_collection_id" ],
                  "constraint_name": "collection_in_collection_transitive_leader_fkey",
                  "reference": {
                     "title": "Leader Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": [ "member_collection_id_namespace", "member_collection_id" ],
                  "constraint_name": "collection_in_collection_transitive_member_fkey",
                  "reference": {
                     "title": "Member Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_in_collection_transitive.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_subject_granularity",
         "title": "collection_subject_granularity",
         "description": "Collapsed association of subject-granularities for subjects described by collection",
         "schema": {
            "fields": [
               {
                  "name": "collection_id_namespace",
                  "description": "Identifier namespace for this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "collection_id",
                  "description": "The ID of this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_granularity",
                  "description": "A CFDE CV term categorizing described subject by multiplicity",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "collection_id_namespace",
               "collection_id",
               "subject_granularity"
            ],
            "foreignKeys": [
               {
                  "fields": [ "collection_id_namespace", "collection_id" ],
                  "constraint_name": "collection_subject_granularity_collection_fkey",
                  "reference": {
                     "title": "Characterized Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "subject_granularity",
                  "constraint_name": "collection_subject_granularity_granularity_fkey",
                  "reference": {
                     "title": "Subject Granularity",
                     "resource": "subject_granularity",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_subject_granularity.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_subject_role_taxonomy",
         "title": "collection_subject_role_taxonomy",
         "description": "Collapsed association of subject-role-taxonomies for subjects described by collection",
         "schema": {
            "fields": [
               {
                  "name": "collection_id_namespace",
                  "description": "Identifier namespace for this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "collection_id",
                  "description": "The ID of this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_role_id",
                  "description": "The ID of the role assigned to this organism-level constituent component of described subject",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "subject_taxonomy_id",
                  "description": "An NCBI Taxonomy Database ID identifying taxon of described subject",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               }
            ],
            "primaryKey": [
               "collection_id_namespace",
               "collection_id",
               "subject_role_id",
               "subject_taxonomy_id"
            ],
            "foreignKeys": [
               {
                  "fields": [ "collection_id_namespace", "collection_id" ],
                  "constraint_name": "collection_subject_granularity_collection_fkey",
                  "reference": {
                     "title": "Characterized Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "subject_role_id",
                  "constraint_name": "collection_subject_role_taxonomy_role_fkey",
                  "reference": {
                     "resource": "subject_role",
                     "fields": "id"
                  }
               },
               {
                  "fields": "subject_taxonomy_id",
                  "constraint_name": "collection_subject_role_taxonomy_taxonomy_fkey",
                  "reference": {
                     "resource": "ncbi_taxonomy",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_subject_role_taxonomy.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_biosample_creation_time",
         "title": "collection_biosample_creation_time",
         "description": "Collapsed association of biosample-creation-times for biosamples described by collection",
         "schema": {
            "fields": [
               {
                  "name": "collection_id_namespace",
                  "description": "Identifier namespace for this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "collection_id",
                  "description": "The ID of this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "biosample_creation_time",
                  "description": "An ISO 8601 -- RFC 3339 (subset)-compliant timestamp documenting desribed biosamples' creation time: YYYY-MM-DDTHH:MM:SS±NN:NN",
                  "type": "datetime",
                  "format": "any"
               }
            ],
            "primaryKey": [
               "collection_id_namespace",
               "collection_id",
               "biosample_creation_time"
            ],
            "foreignKeys": [
               {
                  "fields": [ "collection_id_namespace", "collection_id" ],
                  "constraint_name": "collection_biosample_creation_time_collection_fkey",
                  "reference": {
                     "title": "Characterized Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_biosample_creation_time.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_assay_type",
         "title": "collection_assay_type",
         "description": "Collapsed association of assay-types described by collection",
         "schema": {
            "fields": [
               {
                  "name": "collection_id_namespace",
                  "description": "Identifier namespace for this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "collection_id",
                  "description": "The ID of this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "assay_type",
                  "description": "An OBI CV term ID describing the type of material represented by this collection",
                  "type": "string",
                  "constraints": {
                     "pattern": "^OBI:[0-9]+$"
                  }
               }
            ],
            "primaryKey": [
               "collection_id_namespace",
               "collection_id",
               "assay_type"
            ],
            "foreignKeys": [
               {
                  "fields": [ "collection_id_namespace", "collection_id" ],
                  "constraint_name": "collection_assay_type_collection_fkey",
                  "reference": {
                     "title": "Characterized Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "assay_type",
                  "constraint_name": "collection_assay_type_fkey",
                  "reference": {
                     "resource": "assay_type",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_assay_type.sql"
      },

      {
         "profile": "tabular-data-resource",
         "name": "collection_anatomy",
         "title": "collection_anatomy",
         "description": "Collapsed association of anatomies described by collection",
         "schema": {
            "fields": [
               {
                  "name": "collection_id_namespace",
                  "description": "Identifier namespace for this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "collection_id",
                  "description": "The ID of this collection",
                  "type": "string",
                  "constraints": {
                     "required": true
                  }
               },
               {
                  "name": "anatomy",
                  "description": "An UBERON CV term ID used to locate the origin of this biosample within the physiology of its source or host organism",
                  "type": "string",
                  "constraints": {
                     "pattern": "^UBERON:[0-9]+$"
                  }
               }
            ],
            "primaryKey": [
               "collection_id_namespace",
               "collection_id",
               "anatomy"
            ],
            "foreignKeys": [
               {
                  "fields": [ "collection_id_namespace", "collection_id" ],
                  "constraint_name": "collection_anatomy_collection_fkey",
                  "reference": {
                     "title": "Characterized Collection",
                     "resource": "collection",
                     "fields": [ "id_namespace", "id" ]
                  }
               },
               {
                  "fields": "anatomy",
                  "constraint_name": "collection_anatomy_fkey",
                  "reference": {
                     "resource": "anatomy",
                     "fields": "id"
                  }
               }
            ]
         },
         "derivation_sql_path": "collection_anatomy.sql"
      }

   ]
}
